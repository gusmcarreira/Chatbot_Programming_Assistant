version: "3.1"

session_config:
  session_expiration_time: 5
  carry_over_slots_to_new_session: false

# ------------------ INTENTS ------------------
intents:
  - greet
  - goodbye
  - affirm
  - deny
  - bot_challenge
  - ask_question
  - ask_example
  - ask_help
  - EXTERNAL_ERROR_MESSAGE
  - EXTERNAL_CODE_MESSAGE
# ------------------ ENTITIES -----------------
entities:
## ERROR GUIDANCE ##
- error_type
- error_message
- code_message_answer
- code_test_case
- answer_concept_wanted
######################
# ------------------- SLOTS -------------------
slots:
  ## ERROR GUIDANCE ##
  slot_eg_start:
    type: bool
    influence_conversation: true
    mappings:
    - type: custom

  slot_eg_message:
    type: text
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: error_message

  slot_eg_concept:
    type: text
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: error_type

  slot_eg_question_index:
    type: float
    initial_value: 0
    influence_conversation: false
    mappings:
    - type: custom
    max_value: 10.0
    min_value: 0.0

  slot_eg_questions_list:
    type: list
    influence_conversation: false
    mappings:
      - type: custom

  slot_eg_answer:
    type: text
    influence_conversation: true
    mappings:
      - type: from_text
        conditions:
          - active_loop: form_eg_answer

  # Check if answer was given from a button
  slot_eg_answer_from_option:
    type: bool
    initial_value: false
    influence_conversation: false
    mappings:
    - type: custom

  slot_eg_more_questions:
    type: bool
    initial_value: true
    influence_conversation: true
    mappings:
      - type: custom

  ######################
  ### EXERCISE HELP ####
  slot_eh_start:
    type: bool
    influence_conversation: true
    mappings:
      - type: custom

  slot_eh_answer:
    type: text
    influence_conversation: true
    mappings:
      - type: from_text
        conditions:
          - active_loop: form_eh_answer

  slot_eh_code_answer:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: code_message_answer

  slot_eh_situation:
      type: text
      mappings:
        - type: custom

  slot_eh_test_case:
    type: any
    mappings:
      - type: from_entity
        entity: code_test_case

  slot_eh_concepts_options:
    type: list
    mappings:
      - type: custom

  slot_eh_question_ask:
    type: text
    mappings:
      - type: custom

  slot_eh_second_try:
    type: text
    mappings:
      - type: custom
  ######################

# ------------------- FORMS -------------------
forms:
  ## ERROR GUIDANCE ##
  form_eg_start:
    required_slots:
        - slot_eg_start

  form_eg_answer:
    required_slots:
        - slot_eg_answer
  ######################
  ## ERROR GUIDANCE ##
  form_eh_start:
    required_slots:
      - slot_eh_start

  form_eh_answer:
    required_slots:
      - slot_eh_answer
  ######################

# ------------------ RESPONSES ------------------
responses:
  utter_greet:
  - text: "Ol√° üëã! Em que posso ajudar?"
  - text: "Ol√° üëã! Em que posso ser √∫til?"

  utter_did_that_help:
  - text: "A resposta foi esclarecedora?"
  - text: "A resposta ajudou?"

  utter_goodbye:
  - text: "Adeus üëã"
  - text: "At√© j√° üëã"
  - text: "At√© logo üëã"

  utter_iamabot:
  - text: "Na verdade sou um Chatbot ü§ñ!"
  - text: "Nenhum humano aqui! Apenas um simp√°tico chatbot ü§ñ!"

  utter_anything_else:
    - text: "Algo mais em que possa ser √∫til?"
    - text: "Posso ajud√°-lo em algo mais?"

  utter_please_rephrase:
  - text: "Desculpe, estou com dificuldade em entender o que quer. Tente escrever de forma diferente, e lembre-se que eu o consigo
  ajudar em perguntas sobre conceitos, tais como, 'o que √© um if?', ou de dar exemplos, por exemplo 'me d√™ um exemplo de um for loop'."

  utter_congratulate:
  - text: "Boa, continue assim!"
  - text: "Isso mesmo üòé!"

  utter_refresh_memory:
  - text: "Talvez as seguintes op√ß√µes lhe refresquem a mem√≥ria:"

  utter_present_answer:
  - text: "Pode pergunta! üòÅ"

  # utter_ask_<form_name>_<slot_name>
  utter_ask_form_eg_start_slot_eg_start:
    - text: "Parece estar com alguns problemas, gostaria de uma ajudinha? (sim/n√£o)"

  utter_ask_form_eh_start_slot_eh_start:
    - text: "Parece estar h√° algum tempo preso neste exerc√≠cio, proponho um di√°logo que talvez o ajude a perceber melhor o exerc√≠cio e o que ele envolve, o que diz? (sim/n√£o)"

  utter_are_you_sure:
  - text: "Tem a certeza?"

  utter_ask_for_help:
  - text: "Desculpe, vou treinar para a pr√≥xima conseguir ajudar üòî. Gostaria de mandar mensagem ao professor com a sua d√∫vida?"
  - text: "Desculpe, vou estudar mais para a pr√≥xima conseguir ajudar üòî. Gostaria de mandar mensagem ao professor com a sua d√∫vida?"

  utter_wants_help:
  - text: "Acima do editor de programa√ß√£o tem um bot√£o chamado 'Pedir ajuda' clique nele e √© s√≥ escrever a sua d√∫vida!"

  utter_ask:
  - text: "For√ßa farei o meu melhor para conseguir ajudar!"
  - text: "Chute! Farei o meu melhor para conseguir ajudar!"

# ------------------ ACTIONS ------------------
actions:
- action_answer_questions                         #-> Answer student questions         # =========== GENERAL ==========
- action_eg_reset_slot_start                      #-> Reset slots
- validate_form_eg_start                          #-> Check for yes or no              # ======= ERROR GUIDANCE =======
- action_eg_start                                 #-> Start error guidance
- action_eg_check_answer                          #-> Check student answers
- action_eg_followup_concept                      #-> Send following questions
- validate_form_eh_start                          #-> Check for yes or no               # == EXERCISE COMPREHENSION ===
- validate_form_eh_answer
- action_eh_test_case                             #-> Check test case answer
- action_eh_concepts_included                     #-> Ask what concepts are included
- action_eh_questions                             #-> Start asking amount each concept (vars, inputs, ...)
- action_eh_concepts_order                        #-> Ask the order of the concepts
- action_eh_check_answer                          #-> Check the correctness of the student's answers
- action_eh_further_help                          #-> Student was not clarified